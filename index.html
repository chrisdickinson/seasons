<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Seasons by chrisdickinson</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <link rel="stylesheet" href="media/css/seasons.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Seasons</h1>
        <p class="header">Display code over time.</p>
        <ul>
          <li class="download"><a class="buttons" href="https://github.com/chrisdickinson/seasons/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/chrisdickinson/seasons/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/chrisdickinson/seasons">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/chrisdickinson">chrisdickinson</a></p>


      </header>
      <section>
        <h1>Seasons.js</h1>

        <pre id="example" class="seasons">
        </pre>
        <input id="range" type="range" min="0" max="100" value="0" />

<p>View changes to a file over time.</p>

<h2>Installation</h2>

<p>To generate data:</p>

<pre><code>    npm install -g seasons
    build_seasons ../../path/to/some/file/in/some/repo
    # should create an `output.json` in your cwd.
</code></pre>

<p>To use in-browser with require:</p>

<div class="highlight">
<pre>    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://chrisdickinson.github.com/seasons/media/css/seasons.css"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"javascript"</span><span class="nt">&gt;</span>
    <span class="nx">require</span><span class="p">.</span><span class="nx">config</span><span class="p">({</span><span class="nx">paths</span><span class="o">:</span><span class="p">{</span><span class="nx">seasons</span><span class="o">:</span><span class="s1">'https://chrisdickinson.github.com/seasons/media/js/seasons.min'</span><span class="p">}})</span>
    <span class="nx">require</span><span class="p">([</span><span class="s1">'seasons'</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">seasons</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">seasons</span><span class="p">(</span><span class="s1">'#id'</span><span class="p">,</span> <span class="p">{</span><span class="nx">data</span><span class="p">})</span>
    <span class="p">})</span>
    <span class="nt">&lt;/script&gt;</span>
</pre>
</div>


<p>And it should work with <a href="https://github.com/substack/browserify">browserify</a> too.</p>

<h2>API</h2>

<h3>seasons = require('seasons') -&gt; function</h3>

<p>Returns the <code>seasons</code> function.</p>

<h3>seasons(id, data[, lineHeight][, highlighter]) -&gt; function</h3>

<p>Given commit data and a DOM id, display the code contained in <code>data</code>.</p>

<h2>Building Seasons data</h2>

<div class="highlight">
<pre>    build_seasons ../../path/to/some/file/in/some/repo
    <span class="c"># should create an `output.json` in your cwd.</span>
</pre>
</div>

      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <script type="text/javascript">
        PLATE_DATA =

[{"idx":1,"commit":"f25a147ca99927f7e0411642c6307fd4a819f2f6","msg":"trap errors thrown by nodes","data":[{"hash":"66e6da66b8043c49693a46b84b698367e0817fa6","line":"var getGlobalObject, exportsObject;","num":1},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":2},{"hash":"08a4f7cd38aecbee3bf7f9c987434249315ee681","line":"try {","num":3},{"hash":"9bcaa739cedecbacd7de7970d38d10dd6cbb3bff","line":"    exportsObject = exports;","num":4},{"hash":"d729ebb9b7a91e44798ee44618b68deaef1f758e","line":"    getGlobalObject = require('./namespace').getGlobalObject;","num":5},{"hash":"0084fb6451cf8dc86cfeb1a1ad997a075dffc188","line":"} catch(err) {}","num":6},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":7},{"hash":"d5bf1f908fa7d03466e1f8beebe2018e8ee65f8d","line":"(function(global) {","num":8},{"hash":"d1ae39cde1a1944e310531cdb742e8bce3fe715a","line":"    var tokens = global.require('tokens'),","num":9},{"hash":"f0d2e0bc3afa23a64ad57464dcadeacd2a99d9d7","line":"        parsers = global.require('parsers'),","num":10},{"hash":"0b1facc6f9535d111d662c88aaa27768e759c076","line":"        libraries = global.require('libraries');","num":11},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":12},{"hash":"5015ced7f1e658cdff1d2f8c41a4862338760402","line":"    var Context = function(dict) {","num":13},{"hash":"96c9831417b999458bba82cbb42959f5c535fb50","line":"        for(var name in dict) if(dict.hasOwnProperty(name)) {","num":14},{"hash":"b3b45fcb21cf76e2088b643c48fc0f2fc34e7a32","line":"            this[name] = dict[name];","num":15},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":16},{"hash":"2d2f89ecdf72aa2066214590fb40662e793fb47c","line":"        this._original = dict;","num":17},{"hash":"7cf20ef5b064be9000cd5ba7234ed26c41147194","line":"        this._copy = function() {","num":18},{"hash":"1d7bde156805acda9f58ebad360dc5da93b268df","line":"            return Context.copy(this);","num":19},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"        };","num":20},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":21},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":22},{"hash":"5814b3c54980bba88fb55e181de130da4b76b36a","line":"    Context.copy = function(ctxt) {","num":23},{"hash":"409cf1b75c4699d58ace87e30b72f89bdeec1b80","line":"        var toCopy = {};","num":24},{"hash":"229ed40fba386bd2f6ea35f0c76942ca104faf8c","line":"        for(var name in ctxt._original) if (ctxt._original.hasOwnProperty(name)) {","num":25},{"hash":"7b68f2fba3602921211d2d0efcd6b4b536e0dde2","line":"            toCopy[name] = ctxt._original[name];","num":26},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":27},{"hash":"26170af6c844154797bdf0808f7765f9e60051ee","line":"        for(var name in ctxt) if (ctxt.hasOwnProperty(name) && name !== '_original' && name !== '_copy') {","num":28},{"hash":"4ac6bffa0c322082619094e9eb82b893f074a12f","line":"            toCopy[name] = ctxt[name];","num":29},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":30},{"hash":"4d77ab492fb6629d6e735c9827900cb20689fd5f","line":"        return new Context(toCopy);","num":31},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":32},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":33},{"hash":"74b373e4c752ad43ff7e142abe74e14798cdd5df","line":"    var Template = function(raw, libs, parser) {","num":34},{"hash":"b1e0959d4a6a37963c7297098c2c7db9f6d22e03","line":"        if(typeof(raw) !== 'string') {","num":35},{"hash":"5dd6de5f9255d09875b4e8c5e25ac93c26d7eb15","line":"            throw new TypeError(\"You must pass in a string to render the template.\");","num":36},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":37},{"hash":"ed826a4996ab42f59d873795b3fad5ded697d294","line":"        this.raw = raw;","num":38},{"hash":"976b25ee4a6b0ea2b4145566f79e2a9b6f430991","line":"        libs = libs || {};","num":39},{"hash":"d4813347734cb22682c25a51a0caff51e00225cf","line":"        this.tag_library = libs.tag_library || new libraries.DefaultTagLibrary();","num":40},{"hash":"605eac9ba41bc7e3ecc1942656a2dfb0b7bcd37e","line":"        this.filter_library = libs.filter_library || new libraries.DefaultFilterLibrary();","num":41},{"hash":"d41b2d2d5178b26971a54b2941df093b307fde05","line":"        this.plugin_library = libs.plugin_library || new libraries.DefaultPluginLibrary();","num":42},{"hash":"70e97c1a826a1c5cc9d5f9e435451242de29456c","line":"        this.parser = parser || parsers.Parser;","num":43},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":44},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":45},{"hash":"baecfcdf4e5d4ae77436ef8c4e374d462cf211c8","line":"    Template.prototype.getNodeList = function() {","num":46},{"hash":"0ddd55a69142e02f99788de51527da9a2dea5063","line":"        if(!this.tokens) {","num":47},{"hash":"38b1dfdfdb89d142edb1fefeddb54b67983467df","line":"            this.tokens = Template.tokenize(this.raw);","num":48},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":49},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":50},{"hash":"deefa39275a43f66da76ce9c21604766e0c8ab22","line":"        if(!this.nodelist) {","num":51},{"hash":"7260da21642dbb4c43f7fac3a7e50bcbf2bd5291","line":"            var parser = new this.parser(","num":52},{"hash":"0925015ec52d351cdae7f72380d409bb91ee1581","line":"                this.tokens,","num":53},{"hash":"6f9b2dc55db404d2888d8fbe502e5416741190af","line":"                this.tag_library,","num":54},{"hash":"9f6fb48de8f3b53343e76e6c455a773d8d596797","line":"                this.filter_library,","num":55},{"hash":"fe84ef070369caa41881f9a062f20291628f22ad","line":"                this.plugin_library,","num":56},{"hash":"0634618a7ecf909a0a2d33b9ab5f27367c5b4085","line":"                this);","num":57},{"hash":"315ddad7330a70e9d2a0af26234570c98db4d009","line":"            this.nodelist = parser.parse();","num":58},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":59},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":60},{"hash":"7cc062abcc3d31b75282d84a031819d14ea2c667","line":"        return this.nodelist;","num":61},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":62},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":63},{"hash":"60004d2fd3a0e5bcae456f1455e422e22d87c113","line":"    Template.prototype.render = function(context, callback) {","num":64},{"hash":"6af9e128810cd775bb8d41d9fb57c6b8e17edde9","line":"        if(typeof(context) !== 'object') {","num":65},{"hash":"6636d1cb7320c74d2b00af30d2b82ff391853a85","line":"            throw new TypeError(\"You must pass in an instance of Object or plate.Context\");","num":66},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":67},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":68},{"hash":"08a4f7cd38aecbee3bf7f9c987434249315ee681","line":"        try {","num":69},{"hash":"665429a8de9119c5b654f216495d169f69db3196","line":"            if(!(context instanceof Context)) {","num":70},{"hash":"81cc1fe612cad81a7a1b7f7beadd6598bf8dfc51","line":"                context = new Context(context);","num":71},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":72},{"hash":"26e017706a1a3cabfa606f280ee1d7d0526a9b90","line":"            this.getNodeList();","num":73},{"hash":"c5727732e97dd0d0d7dfceced41e17c7f5367f91","line":"            this.nodelist.render(context, callback);","num":74},{"hash":"4966493562ac9241fa54f1671643d9a1c01ddcb8","line":"        } catch(err) {","num":75},{"hash":"a5a899c1d024d318d01782a0769c0ee31d5eadd6","line":"            callback(err, null);","num":76},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":77},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":78},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":79},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":80},{"hash":"80d848ba183f00cf5c1ff3f445783ecb069d10a4","line":"    var MATCH_RE = /\\{[%#\\{](.*?)[\\}#%]\\}/g;","num":81},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":82},{"hash":"d03ab1a04c05f2bc43636dee5b038bfea4cb5a53","line":"    Template.tokenize = function(original) {","num":83},{"hash":"fe098a64f9a195536f23683068f0f13efce0a8d6","line":"        var raw = original.slice(),","num":84},{"hash":"24d04f2959579877f87a34d14d7766e30195dea4","line":"            match = null,","num":85},{"hash":"9e866f9ae218894f6b71b8c9d710ca61a3272bd5","line":"            map = {","num":86},{"hash":"c6e08e8f4de39159173cfe3a97676341e1576157","line":"                '%':tokens.TagToken,","num":87},{"hash":"7a065d147db7bac6f79fcd3caf1969dc75d2a1ae","line":"                '#':tokens.CommentToken,","num":88},{"hash":"d6b1513d0586f9fe6f5c8329d8a688bc60c45b9a","line":"                '{':tokens.FilterToken","num":89},{"hash":"fe464369d3a156668fdcb241be4ad0e90b710de8","line":"            },","num":90},{"hash":"0f4bc3e65ca565e6296ee4751ee6076409ed72b8","line":"            tokens_out = [],","num":91},{"hash":"a739cbe5d40b22bf4f8799b780122888e4455b08","line":"            lineNo = 1,","num":92},{"hash":"5424e50cb8df7943e3f1737ebff6356b032a55cf","line":"            incLineNo = function(str) {","num":93},{"hash":"106c4ba986be9ca5495612df9320c1047ecf5a47","line":"                var count = 0;","num":94},{"hash":"81038ad14a5106930a110497eebbf4ad16ac7a90","line":"                for(var i = 0, len = str.length; i < len; ++i) {","num":95},{"hash":"41e412b5cdcb942146db76128279bb43e4474ce7","line":"                    if(str.charAt(i) == '\\n') {","num":96},{"hash":"487287dc3da09abcf29807c7df8001cbb3ad12f7","line":"                        ++count;","num":97},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                    }","num":98},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                }","num":99},{"hash":"e0ca8b17c337969b61af1e7322ee31e99363505a","line":"                lineNo += count;","num":100},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"            };","num":101},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":102},{"hash":"314e74bb1e4e8b4b7d00d142be380c0802505935","line":"        do {","num":103},{"hash":"e9ed68dce6d0fc7ae61b16691fe70674e1a95431","line":"            MATCH_RE.lastIndex = 0;","num":104},{"hash":"4753eef81d4aa9c0f43f8cce11757c281996e08e","line":"            match = MATCH_RE.exec(raw);","num":105},{"hash":"c31ec7498fc97fe4501a638e5777dc5ff02826b5","line":"            if(match) {","num":106},{"hash":"991da4c1e1697d90a3b472aabd9b51e7b2080af8","line":"                incLineNo(raw.slice(0, match.index));","num":107},{"hash":"be1ab99b00010dfcd2c3d02a234c064323a1aa4c","line":"                if(match.index > 0) {","num":108},{"hash":"d07d9be74e5d7e51242b68e88acbd0c5af733782","line":"                    tokens_out.push(new tokens.TextToken(raw.slice(0, match.index)));","num":109},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                }","num":110},{"hash":"9d943f63bcb5a4a5e68e056214cfd73ba99ef220","line":"                tokens_out.push(new map[match[0].charAt(1)](match[1].replace(/^\\s+/g,'').replace(/^\\s+$/g, ''), lineNo));","num":111},{"hash":"e6c55cc2aaf5ae8683f918ad5e607fb9121eecfe","line":"                raw = raw.slice(match.index+match[0].length);","num":112},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":113},{"hash":"9b2af96ac1d0fdb5158ea9febd986d4f68b67466","line":"        } while(match);","num":114},{"hash":"b4a1f20179bfc67ff6ca5902239b492258615958","line":"        if(raw) {","num":115},{"hash":"fa7ffcadf7d81409b6f00912e334bd01e73559b6","line":"            tokens_out.push(new tokens.TextToken(raw));","num":116},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":117},{"hash":"8abf52374b96627a4f5307c5867aba123e7b4114","line":"        return tokens_out;","num":118},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":119},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":120},{"hash":"42add55194e2bd9c9d8d1fbeee1c26ae7539dd38","line":"    var exporter = global.getExporter();","num":121},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":122},{"hash":"a62de1ff1086ec8762e61ef22e0b080ef37968c2","line":"    exporter('Context', Context);","num":123},{"hash":"6711a04f2b007f0a2d1961275baeb6778d4481da","line":"    exporter('Template', Template);","num":124},{"hash":"83437304f9c4badd5183518a294232388d890761","line":"})(getGlobalObject('plate', exportsObject));","num":125}]},{"idx":2,"commit":"f5493e89701c06faf43e422cc398d2311a48fedc","msg":"remove !raw check in plate.Template","data":[{"hash":"66e6da66b8043c49693a46b84b698367e0817fa6","line":"var getGlobalObject, exportsObject;","num":1},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":2},{"hash":"08a4f7cd38aecbee3bf7f9c987434249315ee681","line":"try {","num":3},{"hash":"9bcaa739cedecbacd7de7970d38d10dd6cbb3bff","line":"    exportsObject = exports;","num":4},{"hash":"d729ebb9b7a91e44798ee44618b68deaef1f758e","line":"    getGlobalObject = require('./namespace').getGlobalObject;","num":5},{"hash":"0084fb6451cf8dc86cfeb1a1ad997a075dffc188","line":"} catch(err) {}","num":6},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":7},{"hash":"d5bf1f908fa7d03466e1f8beebe2018e8ee65f8d","line":"(function(global) {","num":8},{"hash":"d1ae39cde1a1944e310531cdb742e8bce3fe715a","line":"    var tokens = global.require('tokens'),","num":9},{"hash":"f0d2e0bc3afa23a64ad57464dcadeacd2a99d9d7","line":"        parsers = global.require('parsers'),","num":10},{"hash":"0b1facc6f9535d111d662c88aaa27768e759c076","line":"        libraries = global.require('libraries');","num":11},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":12},{"hash":"5015ced7f1e658cdff1d2f8c41a4862338760402","line":"    var Context = function(dict) {","num":13},{"hash":"96c9831417b999458bba82cbb42959f5c535fb50","line":"        for(var name in dict) if(dict.hasOwnProperty(name)) {","num":14},{"hash":"b3b45fcb21cf76e2088b643c48fc0f2fc34e7a32","line":"            this[name] = dict[name];","num":15},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":16},{"hash":"2d2f89ecdf72aa2066214590fb40662e793fb47c","line":"        this._original = dict;","num":17},{"hash":"7cf20ef5b064be9000cd5ba7234ed26c41147194","line":"        this._copy = function() {","num":18},{"hash":"1d7bde156805acda9f58ebad360dc5da93b268df","line":"            return Context.copy(this);","num":19},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"        };","num":20},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":21},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":22},{"hash":"5814b3c54980bba88fb55e181de130da4b76b36a","line":"    Context.copy = function(ctxt) {","num":23},{"hash":"409cf1b75c4699d58ace87e30b72f89bdeec1b80","line":"        var toCopy = {};","num":24},{"hash":"229ed40fba386bd2f6ea35f0c76942ca104faf8c","line":"        for(var name in ctxt._original) if (ctxt._original.hasOwnProperty(name)) {","num":25},{"hash":"7b68f2fba3602921211d2d0efcd6b4b536e0dde2","line":"            toCopy[name] = ctxt._original[name];","num":26},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":27},{"hash":"26170af6c844154797bdf0808f7765f9e60051ee","line":"        for(var name in ctxt) if (ctxt.hasOwnProperty(name) && name !== '_original' && name !== '_copy') {","num":28},{"hash":"4ac6bffa0c322082619094e9eb82b893f074a12f","line":"            toCopy[name] = ctxt[name];","num":29},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":30},{"hash":"4d77ab492fb6629d6e735c9827900cb20689fd5f","line":"        return new Context(toCopy);","num":31},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":32},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":33},{"hash":"74b373e4c752ad43ff7e142abe74e14798cdd5df","line":"    var Template = function(raw, libs, parser) {","num":34},{"hash":"b1e0959d4a6a37963c7297098c2c7db9f6d22e03","line":"        if(typeof(raw) !== 'string') {","num":35},{"hash":"5dd6de5f9255d09875b4e8c5e25ac93c26d7eb15","line":"            throw new TypeError(\"You must pass in a string to render the template.\");","num":36},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":37},{"hash":"ed826a4996ab42f59d873795b3fad5ded697d294","line":"        this.raw = raw;","num":38},{"hash":"976b25ee4a6b0ea2b4145566f79e2a9b6f430991","line":"        libs = libs || {};","num":39},{"hash":"d4813347734cb22682c25a51a0caff51e00225cf","line":"        this.tag_library = libs.tag_library || new libraries.DefaultTagLibrary();","num":40},{"hash":"605eac9ba41bc7e3ecc1942656a2dfb0b7bcd37e","line":"        this.filter_library = libs.filter_library || new libraries.DefaultFilterLibrary();","num":41},{"hash":"d41b2d2d5178b26971a54b2941df093b307fde05","line":"        this.plugin_library = libs.plugin_library || new libraries.DefaultPluginLibrary();","num":42},{"hash":"70e97c1a826a1c5cc9d5f9e435451242de29456c","line":"        this.parser = parser || parsers.Parser;","num":43},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":44},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":45},{"hash":"baecfcdf4e5d4ae77436ef8c4e374d462cf211c8","line":"    Template.prototype.getNodeList = function() {","num":46},{"hash":"0ddd55a69142e02f99788de51527da9a2dea5063","line":"        if(!this.tokens) {","num":47},{"hash":"38b1dfdfdb89d142edb1fefeddb54b67983467df","line":"            this.tokens = Template.tokenize(this.raw);","num":48},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":49},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":50},{"hash":"deefa39275a43f66da76ce9c21604766e0c8ab22","line":"        if(!this.nodelist) {","num":51},{"hash":"7260da21642dbb4c43f7fac3a7e50bcbf2bd5291","line":"            var parser = new this.parser(","num":52},{"hash":"0925015ec52d351cdae7f72380d409bb91ee1581","line":"                this.tokens,","num":53},{"hash":"6f9b2dc55db404d2888d8fbe502e5416741190af","line":"                this.tag_library,","num":54},{"hash":"9f6fb48de8f3b53343e76e6c455a773d8d596797","line":"                this.filter_library,","num":55},{"hash":"fe84ef070369caa41881f9a062f20291628f22ad","line":"                this.plugin_library,","num":56},{"hash":"0634618a7ecf909a0a2d33b9ab5f27367c5b4085","line":"                this);","num":57},{"hash":"315ddad7330a70e9d2a0af26234570c98db4d009","line":"            this.nodelist = parser.parse();","num":58},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":59},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":60},{"hash":"7cc062abcc3d31b75282d84a031819d14ea2c667","line":"        return this.nodelist;","num":61},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":62},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":63},{"hash":"60004d2fd3a0e5bcae456f1455e422e22d87c113","line":"    Template.prototype.render = function(context, callback) {","num":64},{"hash":"6af9e128810cd775bb8d41d9fb57c6b8e17edde9","line":"        if(typeof(context) !== 'object') {","num":65},{"hash":"6636d1cb7320c74d2b00af30d2b82ff391853a85","line":"            throw new TypeError(\"You must pass in an instance of Object or plate.Context\");","num":66},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":67},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":68},{"hash":"665429a8de9119c5b654f216495d169f69db3196","line":"        if(!(context instanceof Context)) {","num":69},{"hash":"81cc1fe612cad81a7a1b7f7beadd6598bf8dfc51","line":"            context = new Context(context);","num":70},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":71},{"hash":"26e017706a1a3cabfa606f280ee1d7d0526a9b90","line":"        this.getNodeList();","num":72},{"hash":"c5727732e97dd0d0d7dfceced41e17c7f5367f91","line":"        this.nodelist.render(context, callback);","num":73},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":74},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":75},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":76},{"hash":"80d848ba183f00cf5c1ff3f445783ecb069d10a4","line":"    var MATCH_RE = /\\{[%#\\{](.*?)[\\}#%]\\}/g;","num":77},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":78},{"hash":"d03ab1a04c05f2bc43636dee5b038bfea4cb5a53","line":"    Template.tokenize = function(original) {","num":79},{"hash":"fe098a64f9a195536f23683068f0f13efce0a8d6","line":"        var raw = original.slice(),","num":80},{"hash":"24d04f2959579877f87a34d14d7766e30195dea4","line":"            match = null,","num":81},{"hash":"9e866f9ae218894f6b71b8c9d710ca61a3272bd5","line":"            map = {","num":82},{"hash":"c6e08e8f4de39159173cfe3a97676341e1576157","line":"                '%':tokens.TagToken,","num":83},{"hash":"7a065d147db7bac6f79fcd3caf1969dc75d2a1ae","line":"                '#':tokens.CommentToken,","num":84},{"hash":"d6b1513d0586f9fe6f5c8329d8a688bc60c45b9a","line":"                '{':tokens.FilterToken","num":85},{"hash":"fe464369d3a156668fdcb241be4ad0e90b710de8","line":"            },","num":86},{"hash":"0f4bc3e65ca565e6296ee4751ee6076409ed72b8","line":"            tokens_out = [],","num":87},{"hash":"a739cbe5d40b22bf4f8799b780122888e4455b08","line":"            lineNo = 1,","num":88},{"hash":"5424e50cb8df7943e3f1737ebff6356b032a55cf","line":"            incLineNo = function(str) {","num":89},{"hash":"106c4ba986be9ca5495612df9320c1047ecf5a47","line":"                var count = 0;","num":90},{"hash":"81038ad14a5106930a110497eebbf4ad16ac7a90","line":"                for(var i = 0, len = str.length; i < len; ++i) {","num":91},{"hash":"41e412b5cdcb942146db76128279bb43e4474ce7","line":"                    if(str.charAt(i) == '\\n') {","num":92},{"hash":"487287dc3da09abcf29807c7df8001cbb3ad12f7","line":"                        ++count;","num":93},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                    }","num":94},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                }","num":95},{"hash":"e0ca8b17c337969b61af1e7322ee31e99363505a","line":"                lineNo += count;","num":96},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"            };","num":97},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":98},{"hash":"314e74bb1e4e8b4b7d00d142be380c0802505935","line":"        do {","num":99},{"hash":"e9ed68dce6d0fc7ae61b16691fe70674e1a95431","line":"            MATCH_RE.lastIndex = 0;","num":100},{"hash":"4753eef81d4aa9c0f43f8cce11757c281996e08e","line":"            match = MATCH_RE.exec(raw);","num":101},{"hash":"c31ec7498fc97fe4501a638e5777dc5ff02826b5","line":"            if(match) {","num":102},{"hash":"991da4c1e1697d90a3b472aabd9b51e7b2080af8","line":"                incLineNo(raw.slice(0, match.index));","num":103},{"hash":"be1ab99b00010dfcd2c3d02a234c064323a1aa4c","line":"                if(match.index > 0) {","num":104},{"hash":"d07d9be74e5d7e51242b68e88acbd0c5af733782","line":"                    tokens_out.push(new tokens.TextToken(raw.slice(0, match.index)));","num":105},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                }","num":106},{"hash":"9d943f63bcb5a4a5e68e056214cfd73ba99ef220","line":"                tokens_out.push(new map[match[0].charAt(1)](match[1].replace(/^\\s+/g,'').replace(/^\\s+$/g, ''), lineNo));","num":107},{"hash":"e6c55cc2aaf5ae8683f918ad5e607fb9121eecfe","line":"                raw = raw.slice(match.index+match[0].length);","num":108},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":109},{"hash":"9b2af96ac1d0fdb5158ea9febd986d4f68b67466","line":"        } while(match);","num":110},{"hash":"b4a1f20179bfc67ff6ca5902239b492258615958","line":"        if(raw) {","num":111},{"hash":"fa7ffcadf7d81409b6f00912e334bd01e73559b6","line":"            tokens_out.push(new tokens.TextToken(raw));","num":112},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":113},{"hash":"8abf52374b96627a4f5307c5867aba123e7b4114","line":"        return tokens_out;","num":114},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":115},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":116},{"hash":"42add55194e2bd9c9d8d1fbeee1c26ae7539dd38","line":"    var exporter = global.getExporter();","num":117},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":118},{"hash":"a62de1ff1086ec8762e61ef22e0b080ef37968c2","line":"    exporter('Context', Context);","num":119},{"hash":"6711a04f2b007f0a2d1961275baeb6778d4481da","line":"    exporter('Template', Template);","num":120},{"hash":"83437304f9c4badd5183518a294232388d890761","line":"})(getGlobalObject('plate', exportsObject));","num":121}]},{"idx":3,"commit":"9685dbf07b135ad23a1bb4f95747666639a08031","msg":"wrap plate files in preambles, preparing for browser-readiness","data":[{"hash":"66e6da66b8043c49693a46b84b698367e0817fa6","line":"var getGlobalObject, exportsObject;","num":1},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":2},{"hash":"08a4f7cd38aecbee3bf7f9c987434249315ee681","line":"try {","num":3},{"hash":"9bcaa739cedecbacd7de7970d38d10dd6cbb3bff","line":"    exportsObject = exports;","num":4},{"hash":"d729ebb9b7a91e44798ee44618b68deaef1f758e","line":"    getGlobalObject = require('./namespace').getGlobalObject;","num":5},{"hash":"0084fb6451cf8dc86cfeb1a1ad997a075dffc188","line":"} catch(err) {}","num":6},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":7},{"hash":"d5bf1f908fa7d03466e1f8beebe2018e8ee65f8d","line":"(function(global) {","num":8},{"hash":"d1ae39cde1a1944e310531cdb742e8bce3fe715a","line":"    var tokens = global.require('tokens'),","num":9},{"hash":"f0d2e0bc3afa23a64ad57464dcadeacd2a99d9d7","line":"        parsers = global.require('parsers'),","num":10},{"hash":"0b1facc6f9535d111d662c88aaa27768e759c076","line":"        libraries = global.require('libraries');","num":11},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":12},{"hash":"5015ced7f1e658cdff1d2f8c41a4862338760402","line":"    var Context = function(dict) {","num":13},{"hash":"96c9831417b999458bba82cbb42959f5c535fb50","line":"        for(var name in dict) if(dict.hasOwnProperty(name)) {","num":14},{"hash":"b3b45fcb21cf76e2088b643c48fc0f2fc34e7a32","line":"            this[name] = dict[name];","num":15},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":16},{"hash":"2d2f89ecdf72aa2066214590fb40662e793fb47c","line":"        this._original = dict;","num":17},{"hash":"7cf20ef5b064be9000cd5ba7234ed26c41147194","line":"        this._copy = function() {","num":18},{"hash":"1d7bde156805acda9f58ebad360dc5da93b268df","line":"            return Context.copy(this);","num":19},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"        };","num":20},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":21},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":22},{"hash":"5814b3c54980bba88fb55e181de130da4b76b36a","line":"    Context.copy = function(ctxt) {","num":23},{"hash":"409cf1b75c4699d58ace87e30b72f89bdeec1b80","line":"        var toCopy = {};","num":24},{"hash":"229ed40fba386bd2f6ea35f0c76942ca104faf8c","line":"        for(var name in ctxt._original) if (ctxt._original.hasOwnProperty(name)) {","num":25},{"hash":"7b68f2fba3602921211d2d0efcd6b4b536e0dde2","line":"            toCopy[name] = ctxt._original[name];","num":26},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":27},{"hash":"26170af6c844154797bdf0808f7765f9e60051ee","line":"        for(var name in ctxt) if (ctxt.hasOwnProperty(name) && name !== '_original' && name !== '_copy') {","num":28},{"hash":"4ac6bffa0c322082619094e9eb82b893f074a12f","line":"            toCopy[name] = ctxt[name];","num":29},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":30},{"hash":"4d77ab492fb6629d6e735c9827900cb20689fd5f","line":"        return new Context(toCopy);","num":31},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":32},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":33},{"hash":"74b373e4c752ad43ff7e142abe74e14798cdd5df","line":"    var Template = function(raw, libs, parser) {","num":34},{"hash":"7801c2093b14a0e7d1197d36722aaea2d4758d1b","line":"        if(typeof(raw) !== 'string' || !raw) {","num":35},{"hash":"5dd6de5f9255d09875b4e8c5e25ac93c26d7eb15","line":"            throw new TypeError(\"You must pass in a string to render the template.\");","num":36},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":37},{"hash":"ed826a4996ab42f59d873795b3fad5ded697d294","line":"        this.raw = raw;","num":38},{"hash":"976b25ee4a6b0ea2b4145566f79e2a9b6f430991","line":"        libs = libs || {};","num":39},{"hash":"d4813347734cb22682c25a51a0caff51e00225cf","line":"        this.tag_library = libs.tag_library || new libraries.DefaultTagLibrary();","num":40},{"hash":"605eac9ba41bc7e3ecc1942656a2dfb0b7bcd37e","line":"        this.filter_library = libs.filter_library || new libraries.DefaultFilterLibrary();","num":41},{"hash":"d41b2d2d5178b26971a54b2941df093b307fde05","line":"        this.plugin_library = libs.plugin_library || new libraries.DefaultPluginLibrary();","num":42},{"hash":"70e97c1a826a1c5cc9d5f9e435451242de29456c","line":"        this.parser = parser || parsers.Parser;","num":43},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":44},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":45},{"hash":"baecfcdf4e5d4ae77436ef8c4e374d462cf211c8","line":"    Template.prototype.getNodeList = function() {","num":46},{"hash":"0ddd55a69142e02f99788de51527da9a2dea5063","line":"        if(!this.tokens) {","num":47},{"hash":"38b1dfdfdb89d142edb1fefeddb54b67983467df","line":"            this.tokens = Template.tokenize(this.raw);","num":48},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":49},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":50},{"hash":"deefa39275a43f66da76ce9c21604766e0c8ab22","line":"        if(!this.nodelist) {","num":51},{"hash":"7260da21642dbb4c43f7fac3a7e50bcbf2bd5291","line":"            var parser = new this.parser(","num":52},{"hash":"0925015ec52d351cdae7f72380d409bb91ee1581","line":"                this.tokens,","num":53},{"hash":"6f9b2dc55db404d2888d8fbe502e5416741190af","line":"                this.tag_library,","num":54},{"hash":"9f6fb48de8f3b53343e76e6c455a773d8d596797","line":"                this.filter_library,","num":55},{"hash":"fe84ef070369caa41881f9a062f20291628f22ad","line":"                this.plugin_library,","num":56},{"hash":"0634618a7ecf909a0a2d33b9ab5f27367c5b4085","line":"                this);","num":57},{"hash":"315ddad7330a70e9d2a0af26234570c98db4d009","line":"            this.nodelist = parser.parse();","num":58},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":59},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":60},{"hash":"7cc062abcc3d31b75282d84a031819d14ea2c667","line":"        return this.nodelist;","num":61},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":62},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":63},{"hash":"60004d2fd3a0e5bcae456f1455e422e22d87c113","line":"    Template.prototype.render = function(context, callback) {","num":64},{"hash":"6af9e128810cd775bb8d41d9fb57c6b8e17edde9","line":"        if(typeof(context) !== 'object') {","num":65},{"hash":"6636d1cb7320c74d2b00af30d2b82ff391853a85","line":"            throw new TypeError(\"You must pass in an instance of Object or plate.Context\");","num":66},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":67},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":68},{"hash":"665429a8de9119c5b654f216495d169f69db3196","line":"        if(!(context instanceof Context)) {","num":69},{"hash":"81cc1fe612cad81a7a1b7f7beadd6598bf8dfc51","line":"            context = new Context(context);","num":70},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":71},{"hash":"26e017706a1a3cabfa606f280ee1d7d0526a9b90","line":"        this.getNodeList();","num":72},{"hash":"c5727732e97dd0d0d7dfceced41e17c7f5367f91","line":"        this.nodelist.render(context, callback);","num":73},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":74},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":75},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":76},{"hash":"80d848ba183f00cf5c1ff3f445783ecb069d10a4","line":"    var MATCH_RE = /\\{[%#\\{](.*?)[\\}#%]\\}/g;","num":77},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":78},{"hash":"d03ab1a04c05f2bc43636dee5b038bfea4cb5a53","line":"    Template.tokenize = function(original) {","num":79},{"hash":"fe098a64f9a195536f23683068f0f13efce0a8d6","line":"        var raw = original.slice(),","num":80},{"hash":"24d04f2959579877f87a34d14d7766e30195dea4","line":"            match = null,","num":81},{"hash":"9e866f9ae218894f6b71b8c9d710ca61a3272bd5","line":"            map = {","num":82},{"hash":"c6e08e8f4de39159173cfe3a97676341e1576157","line":"                '%':tokens.TagToken,","num":83},{"hash":"7a065d147db7bac6f79fcd3caf1969dc75d2a1ae","line":"                '#':tokens.CommentToken,","num":84},{"hash":"d6b1513d0586f9fe6f5c8329d8a688bc60c45b9a","line":"                '{':tokens.FilterToken","num":85},{"hash":"fe464369d3a156668fdcb241be4ad0e90b710de8","line":"            },","num":86},{"hash":"0f4bc3e65ca565e6296ee4751ee6076409ed72b8","line":"            tokens_out = [],","num":87},{"hash":"a739cbe5d40b22bf4f8799b780122888e4455b08","line":"            lineNo = 1,","num":88},{"hash":"5424e50cb8df7943e3f1737ebff6356b032a55cf","line":"            incLineNo = function(str) {","num":89},{"hash":"106c4ba986be9ca5495612df9320c1047ecf5a47","line":"                var count = 0;","num":90},{"hash":"81038ad14a5106930a110497eebbf4ad16ac7a90","line":"                for(var i = 0, len = str.length; i < len; ++i) {","num":91},{"hash":"41e412b5cdcb942146db76128279bb43e4474ce7","line":"                    if(str.charAt(i) == '\\n') {","num":92},{"hash":"487287dc3da09abcf29807c7df8001cbb3ad12f7","line":"                        ++count;","num":93},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                    }","num":94},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                }","num":95},{"hash":"e0ca8b17c337969b61af1e7322ee31e99363505a","line":"                lineNo += count;","num":96},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"            };","num":97},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":98},{"hash":"314e74bb1e4e8b4b7d00d142be380c0802505935","line":"        do {","num":99},{"hash":"e9ed68dce6d0fc7ae61b16691fe70674e1a95431","line":"            MATCH_RE.lastIndex = 0;","num":100},{"hash":"4753eef81d4aa9c0f43f8cce11757c281996e08e","line":"            match = MATCH_RE.exec(raw);","num":101},{"hash":"c31ec7498fc97fe4501a638e5777dc5ff02826b5","line":"            if(match) {","num":102},{"hash":"991da4c1e1697d90a3b472aabd9b51e7b2080af8","line":"                incLineNo(raw.slice(0, match.index));","num":103},{"hash":"be1ab99b00010dfcd2c3d02a234c064323a1aa4c","line":"                if(match.index > 0) {","num":104},{"hash":"d07d9be74e5d7e51242b68e88acbd0c5af733782","line":"                    tokens_out.push(new tokens.TextToken(raw.slice(0, match.index)));","num":105},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                }","num":106},{"hash":"9d943f63bcb5a4a5e68e056214cfd73ba99ef220","line":"                tokens_out.push(new map[match[0].charAt(1)](match[1].replace(/^\\s+/g,'').replace(/^\\s+$/g, ''), lineNo));","num":107},{"hash":"e6c55cc2aaf5ae8683f918ad5e607fb9121eecfe","line":"                raw = raw.slice(match.index+match[0].length);","num":108},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":109},{"hash":"9b2af96ac1d0fdb5158ea9febd986d4f68b67466","line":"        } while(match);","num":110},{"hash":"b4a1f20179bfc67ff6ca5902239b492258615958","line":"        if(raw) {","num":111},{"hash":"fa7ffcadf7d81409b6f00912e334bd01e73559b6","line":"            tokens_out.push(new tokens.TextToken(raw));","num":112},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":113},{"hash":"8abf52374b96627a4f5307c5867aba123e7b4114","line":"        return tokens_out;","num":114},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":115},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":116},{"hash":"42add55194e2bd9c9d8d1fbeee1c26ae7539dd38","line":"    var exporter = global.getExporter();","num":117},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":118},{"hash":"a62de1ff1086ec8762e61ef22e0b080ef37968c2","line":"    exporter('Context', Context);","num":119},{"hash":"6711a04f2b007f0a2d1961275baeb6778d4481da","line":"    exporter('Template', Template);","num":120},{"hash":"83437304f9c4badd5183518a294232388d890761","line":"})(getGlobalObject('plate', exportsObject));","num":121}]},{"idx":4,"commit":"414dced461b9be1189984dfedf11f66932e09472","msg":"add include tag","data":[{"hash":"7b61c98eda3e653a5ae983813cc2484f80cbed3d","line":"var tokens = require('./tokens'),","num":1},{"hash":"3d6f2e8f6db2d27fe8cc436a4f3de36a4729d068","line":"    parsers = require('./parsers'),","num":2},{"hash":"5e3eb152d8df7a16b6d2d355fa39fc0460688599","line":"    libraries = require('./libraries');","num":3},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":4},{"hash":"5015ced7f1e658cdff1d2f8c41a4862338760402","line":"var Context = function(dict) {","num":5},{"hash":"96c9831417b999458bba82cbb42959f5c535fb50","line":"    for(var name in dict) if(dict.hasOwnProperty(name)) {","num":6},{"hash":"b3b45fcb21cf76e2088b643c48fc0f2fc34e7a32","line":"        this[name] = dict[name];","num":7},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":8},{"hash":"2d2f89ecdf72aa2066214590fb40662e793fb47c","line":"    this._original = dict;","num":9},{"hash":"7cf20ef5b064be9000cd5ba7234ed26c41147194","line":"    this._copy = function() {","num":10},{"hash":"1d7bde156805acda9f58ebad360dc5da93b268df","line":"        return Context.copy(this);","num":11},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":12},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":13},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":14},{"hash":"5814b3c54980bba88fb55e181de130da4b76b36a","line":"Context.copy = function(ctxt) {","num":15},{"hash":"409cf1b75c4699d58ace87e30b72f89bdeec1b80","line":"    var toCopy = {};","num":16},{"hash":"229ed40fba386bd2f6ea35f0c76942ca104faf8c","line":"    for(var name in ctxt._original) if (ctxt._original.hasOwnProperty(name)) {","num":17},{"hash":"7b68f2fba3602921211d2d0efcd6b4b536e0dde2","line":"        toCopy[name] = ctxt._original[name];","num":18},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":19},{"hash":"26170af6c844154797bdf0808f7765f9e60051ee","line":"    for(var name in ctxt) if (ctxt.hasOwnProperty(name) && name !== '_original' && name !== '_copy') {","num":20},{"hash":"4ac6bffa0c322082619094e9eb82b893f074a12f","line":"        toCopy[name] = ctxt[name];","num":21},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":22},{"hash":"4d77ab492fb6629d6e735c9827900cb20689fd5f","line":"    return new Context(toCopy);","num":23},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":24},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":25},{"hash":"74b373e4c752ad43ff7e142abe74e14798cdd5df","line":"var Template = function(raw, libs, parser) {","num":26},{"hash":"7801c2093b14a0e7d1197d36722aaea2d4758d1b","line":"    if(typeof(raw) !== 'string' || !raw) {","num":27},{"hash":"5dd6de5f9255d09875b4e8c5e25ac93c26d7eb15","line":"        throw new TypeError(\"You must pass in a string to render the template.\");","num":28},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":29},{"hash":"ed826a4996ab42f59d873795b3fad5ded697d294","line":"    this.raw = raw;","num":30},{"hash":"976b25ee4a6b0ea2b4145566f79e2a9b6f430991","line":"    libs = libs || {};","num":31},{"hash":"d4813347734cb22682c25a51a0caff51e00225cf","line":"    this.tag_library = libs.tag_library || new libraries.DefaultTagLibrary();","num":32},{"hash":"605eac9ba41bc7e3ecc1942656a2dfb0b7bcd37e","line":"    this.filter_library = libs.filter_library || new libraries.DefaultFilterLibrary();","num":33},{"hash":"d41b2d2d5178b26971a54b2941df093b307fde05","line":"    this.plugin_library = libs.plugin_library || new libraries.DefaultPluginLibrary();","num":34},{"hash":"70e97c1a826a1c5cc9d5f9e435451242de29456c","line":"    this.parser = parser || parsers.Parser;","num":35},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":36},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":37},{"hash":"baecfcdf4e5d4ae77436ef8c4e374d462cf211c8","line":"Template.prototype.getNodeList = function() {","num":38},{"hash":"0ddd55a69142e02f99788de51527da9a2dea5063","line":"    if(!this.tokens) {","num":39},{"hash":"38b1dfdfdb89d142edb1fefeddb54b67983467df","line":"        this.tokens = Template.tokenize(this.raw);","num":40},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":41},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":42},{"hash":"deefa39275a43f66da76ce9c21604766e0c8ab22","line":"    if(!this.nodelist) {","num":43},{"hash":"7260da21642dbb4c43f7fac3a7e50bcbf2bd5291","line":"        var parser = new this.parser(","num":44},{"hash":"0925015ec52d351cdae7f72380d409bb91ee1581","line":"            this.tokens,","num":45},{"hash":"6f9b2dc55db404d2888d8fbe502e5416741190af","line":"            this.tag_library,","num":46},{"hash":"9f6fb48de8f3b53343e76e6c455a773d8d596797","line":"            this.filter_library,","num":47},{"hash":"fe84ef070369caa41881f9a062f20291628f22ad","line":"            this.plugin_library,","num":48},{"hash":"0634618a7ecf909a0a2d33b9ab5f27367c5b4085","line":"            this);","num":49},{"hash":"315ddad7330a70e9d2a0af26234570c98db4d009","line":"        this.nodelist = parser.parse();","num":50},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":51},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":52},{"hash":"7cc062abcc3d31b75282d84a031819d14ea2c667","line":"    return this.nodelist;","num":53},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":54},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":55},{"hash":"60004d2fd3a0e5bcae456f1455e422e22d87c113","line":"Template.prototype.render = function(context, callback) {","num":56},{"hash":"6af9e128810cd775bb8d41d9fb57c6b8e17edde9","line":"    if(typeof(context) !== 'object') {","num":57},{"hash":"6636d1cb7320c74d2b00af30d2b82ff391853a85","line":"        throw new TypeError(\"You must pass in an instance of Object or plate.Context\");","num":58},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":59},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":60},{"hash":"665429a8de9119c5b654f216495d169f69db3196","line":"    if(!(context instanceof Context)) {","num":61},{"hash":"81cc1fe612cad81a7a1b7f7beadd6598bf8dfc51","line":"        context = new Context(context);","num":62},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":63},{"hash":"26e017706a1a3cabfa606f280ee1d7d0526a9b90","line":"    this.getNodeList();","num":64},{"hash":"c5727732e97dd0d0d7dfceced41e17c7f5367f91","line":"    this.nodelist.render(context, callback);","num":65},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":66},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":67},{"hash":"961bdd7326dcb33e3cb98e2123e57678d3242826","line":"var TAG_RE = /\\{%(.*?)%\\}/g,","num":68},{"hash":"907accf01a1cb952de6b11eaedf091803327849b","line":"    FILTER_RE = /\\{\\{(.*?)\\}\\}/g,","num":69},{"hash":"3b6165075b45b22ad3ac67f220402c36f886f3d3","line":"    COMMENT_RE = /\\{#(.*?)#\\}/g;","num":70},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":71},{"hash":"80d848ba183f00cf5c1ff3f445783ecb069d10a4","line":"var MATCH_RE = /\\{[%#\\{](.*?)[\\}#%]\\}/g;","num":72},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":73},{"hash":"d03ab1a04c05f2bc43636dee5b038bfea4cb5a53","line":"Template.tokenize = function(original) {","num":74},{"hash":"fe098a64f9a195536f23683068f0f13efce0a8d6","line":"    var raw = original.slice(),","num":75},{"hash":"24d04f2959579877f87a34d14d7766e30195dea4","line":"        match = null,","num":76},{"hash":"9e866f9ae218894f6b71b8c9d710ca61a3272bd5","line":"        map = {","num":77},{"hash":"c6e08e8f4de39159173cfe3a97676341e1576157","line":"            '%':tokens.TagToken,","num":78},{"hash":"7a065d147db7bac6f79fcd3caf1969dc75d2a1ae","line":"            '#':tokens.CommentToken,","num":79},{"hash":"d6b1513d0586f9fe6f5c8329d8a688bc60c45b9a","line":"            '{':tokens.FilterToken","num":80},{"hash":"fe464369d3a156668fdcb241be4ad0e90b710de8","line":"        },","num":81},{"hash":"0f4bc3e65ca565e6296ee4751ee6076409ed72b8","line":"        tokens_out = [],","num":82},{"hash":"a739cbe5d40b22bf4f8799b780122888e4455b08","line":"        lineNo = 1,","num":83},{"hash":"5424e50cb8df7943e3f1737ebff6356b032a55cf","line":"        incLineNo = function(str) {","num":84},{"hash":"106c4ba986be9ca5495612df9320c1047ecf5a47","line":"            var count = 0;","num":85},{"hash":"81038ad14a5106930a110497eebbf4ad16ac7a90","line":"            for(var i = 0, len = str.length; i < len; ++i) {","num":86},{"hash":"41e412b5cdcb942146db76128279bb43e4474ce7","line":"                if(str.charAt(i) == '\\n') {","num":87},{"hash":"487287dc3da09abcf29807c7df8001cbb3ad12f7","line":"                    ++count;","num":88},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                }","num":89},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":90},{"hash":"e0ca8b17c337969b61af1e7322ee31e99363505a","line":"            lineNo += count;","num":91},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"        };","num":92},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":93},{"hash":"314e74bb1e4e8b4b7d00d142be380c0802505935","line":"    do {","num":94},{"hash":"e9ed68dce6d0fc7ae61b16691fe70674e1a95431","line":"        MATCH_RE.lastIndex = 0;","num":95},{"hash":"4753eef81d4aa9c0f43f8cce11757c281996e08e","line":"        match = MATCH_RE.exec(raw);","num":96},{"hash":"c31ec7498fc97fe4501a638e5777dc5ff02826b5","line":"        if(match) {","num":97},{"hash":"991da4c1e1697d90a3b472aabd9b51e7b2080af8","line":"            incLineNo(raw.slice(0, match.index));","num":98},{"hash":"be1ab99b00010dfcd2c3d02a234c064323a1aa4c","line":"            if(match.index > 0) {","num":99},{"hash":"d07d9be74e5d7e51242b68e88acbd0c5af733782","line":"                tokens_out.push(new tokens.TextToken(raw.slice(0, match.index)));","num":100},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":101},{"hash":"9d943f63bcb5a4a5e68e056214cfd73ba99ef220","line":"            tokens_out.push(new map[match[0].charAt(1)](match[1].replace(/^\\s+/g,'').replace(/^\\s+$/g, ''), lineNo));","num":102},{"hash":"e6c55cc2aaf5ae8683f918ad5e607fb9121eecfe","line":"            raw = raw.slice(match.index+match[0].length);","num":103},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":104},{"hash":"9b2af96ac1d0fdb5158ea9febd986d4f68b67466","line":"    } while(match);","num":105},{"hash":"b4a1f20179bfc67ff6ca5902239b492258615958","line":"    if(raw) {","num":106},{"hash":"fa7ffcadf7d81409b6f00912e334bd01e73559b6","line":"        tokens_out.push(new tokens.TextToken(raw));","num":107},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":108},{"hash":"8abf52374b96627a4f5307c5867aba123e7b4114","line":"    return tokens_out;","num":109},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":110},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":111},{"hash":"1c7cc9b1ea982f80e3e450ee6e6988d1f0d21206","line":"exports.libraries = libraries;","num":112},{"hash":"6e8f96c89fd5e42dce3b5b0173010427dafb75ce","line":"exports.Context = Context;","num":113},{"hash":"c3ac732e91ed031f9ec99d994fd43edc5dd31d40","line":"exports.Template = Template;","num":114}]},{"idx":5,"commit":"05123c343f78a47f9086543665842acc9a03bc31","msg":"extends and block tags work now","data":[{"hash":"7b61c98eda3e653a5ae983813cc2484f80cbed3d","line":"var tokens = require('./tokens'),","num":1},{"hash":"3d6f2e8f6db2d27fe8cc436a4f3de36a4729d068","line":"    parsers = require('./parsers'),","num":2},{"hash":"5e3eb152d8df7a16b6d2d355fa39fc0460688599","line":"    libraries = require('./libraries');","num":3},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":4},{"hash":"5015ced7f1e658cdff1d2f8c41a4862338760402","line":"var Context = function(dict) {","num":5},{"hash":"96c9831417b999458bba82cbb42959f5c535fb50","line":"    for(var name in dict) if(dict.hasOwnProperty(name)) {","num":6},{"hash":"b3b45fcb21cf76e2088b643c48fc0f2fc34e7a32","line":"        this[name] = dict[name];","num":7},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":8},{"hash":"2d2f89ecdf72aa2066214590fb40662e793fb47c","line":"    this._original = dict;","num":9},{"hash":"7cf20ef5b064be9000cd5ba7234ed26c41147194","line":"    this._copy = function() {","num":10},{"hash":"1d7bde156805acda9f58ebad360dc5da93b268df","line":"        return Context.copy(this);","num":11},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":12},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":13},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":14},{"hash":"5814b3c54980bba88fb55e181de130da4b76b36a","line":"Context.copy = function(ctxt) {","num":15},{"hash":"409cf1b75c4699d58ace87e30b72f89bdeec1b80","line":"    var toCopy = {};","num":16},{"hash":"229ed40fba386bd2f6ea35f0c76942ca104faf8c","line":"    for(var name in ctxt._original) if (ctxt._original.hasOwnProperty(name)) {","num":17},{"hash":"7b68f2fba3602921211d2d0efcd6b4b536e0dde2","line":"        toCopy[name] = ctxt._original[name];","num":18},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":19},{"hash":"26170af6c844154797bdf0808f7765f9e60051ee","line":"    for(var name in ctxt) if (ctxt.hasOwnProperty(name) && name !== '_original' && name !== '_copy') {","num":20},{"hash":"4ac6bffa0c322082619094e9eb82b893f074a12f","line":"        toCopy[name] = ctxt[name];","num":21},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":22},{"hash":"4d77ab492fb6629d6e735c9827900cb20689fd5f","line":"    return new Context(toCopy);","num":23},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":24},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":25},{"hash":"74b373e4c752ad43ff7e142abe74e14798cdd5df","line":"var Template = function(raw, libs, parser) {","num":26},{"hash":"7801c2093b14a0e7d1197d36722aaea2d4758d1b","line":"    if(typeof(raw) !== 'string' || !raw) {","num":27},{"hash":"5dd6de5f9255d09875b4e8c5e25ac93c26d7eb15","line":"        throw new TypeError(\"You must pass in a string to render the template.\");","num":28},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":29},{"hash":"ed826a4996ab42f59d873795b3fad5ded697d294","line":"    this.raw = raw;","num":30},{"hash":"976b25ee4a6b0ea2b4145566f79e2a9b6f430991","line":"    libs = libs || {};","num":31},{"hash":"d4813347734cb22682c25a51a0caff51e00225cf","line":"    this.tag_library = libs.tag_library || new libraries.DefaultTagLibrary();","num":32},{"hash":"605eac9ba41bc7e3ecc1942656a2dfb0b7bcd37e","line":"    this.filter_library = libs.filter_library || new libraries.DefaultFilterLibrary();","num":33},{"hash":"d41b2d2d5178b26971a54b2941df093b307fde05","line":"    this.plugin_library = libs.plugin_library || new libraries.DefaultPluginLibrary();","num":34},{"hash":"70e97c1a826a1c5cc9d5f9e435451242de29456c","line":"    this.parser = parser || parsers.Parser;","num":35},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":36},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":37},{"hash":"baecfcdf4e5d4ae77436ef8c4e374d462cf211c8","line":"Template.prototype.getNodeList = function() {","num":38},{"hash":"0ddd55a69142e02f99788de51527da9a2dea5063","line":"    if(!this.tokens) {","num":39},{"hash":"38b1dfdfdb89d142edb1fefeddb54b67983467df","line":"        this.tokens = Template.tokenize(this.raw);","num":40},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":41},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":42},{"hash":"deefa39275a43f66da76ce9c21604766e0c8ab22","line":"    if(!this.nodelist) {","num":43},{"hash":"7260da21642dbb4c43f7fac3a7e50bcbf2bd5291","line":"        var parser = new this.parser(","num":44},{"hash":"0925015ec52d351cdae7f72380d409bb91ee1581","line":"            this.tokens,","num":45},{"hash":"6f9b2dc55db404d2888d8fbe502e5416741190af","line":"            this.tag_library,","num":46},{"hash":"9f6fb48de8f3b53343e76e6c455a773d8d596797","line":"            this.filter_library,","num":47},{"hash":"fe84ef070369caa41881f9a062f20291628f22ad","line":"            this.plugin_library,","num":48},{"hash":"0634618a7ecf909a0a2d33b9ab5f27367c5b4085","line":"            this);","num":49},{"hash":"315ddad7330a70e9d2a0af26234570c98db4d009","line":"        this.nodelist = parser.parse();","num":50},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":51},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":52},{"hash":"7cc062abcc3d31b75282d84a031819d14ea2c667","line":"    return this.nodelist;","num":53},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":54},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":55},{"hash":"60004d2fd3a0e5bcae456f1455e422e22d87c113","line":"Template.prototype.render = function(context, callback) {","num":56},{"hash":"6af9e128810cd775bb8d41d9fb57c6b8e17edde9","line":"    if(typeof(context) !== 'object') {","num":57},{"hash":"6636d1cb7320c74d2b00af30d2b82ff391853a85","line":"        throw new TypeError(\"You must pass in an instance of Object or plate.Context\");","num":58},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":59},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":60},{"hash":"665429a8de9119c5b654f216495d169f69db3196","line":"    if(!(context instanceof Context)) {","num":61},{"hash":"81cc1fe612cad81a7a1b7f7beadd6598bf8dfc51","line":"        context = new Context(context);","num":62},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":63},{"hash":"26e017706a1a3cabfa606f280ee1d7d0526a9b90","line":"    this.getNodeList();","num":64},{"hash":"c5727732e97dd0d0d7dfceced41e17c7f5367f91","line":"    this.nodelist.render(context, callback);","num":65},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":66},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":67},{"hash":"961bdd7326dcb33e3cb98e2123e57678d3242826","line":"var TAG_RE = /\\{%(.*?)%\\}/g,","num":68},{"hash":"907accf01a1cb952de6b11eaedf091803327849b","line":"    FILTER_RE = /\\{\\{(.*?)\\}\\}/g,","num":69},{"hash":"3b6165075b45b22ad3ac67f220402c36f886f3d3","line":"    COMMENT_RE = /\\{#(.*?)#\\}/g;","num":70},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":71},{"hash":"80d848ba183f00cf5c1ff3f445783ecb069d10a4","line":"var MATCH_RE = /\\{[%#\\{](.*?)[\\}#%]\\}/g;","num":72},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":73},{"hash":"d03ab1a04c05f2bc43636dee5b038bfea4cb5a53","line":"Template.tokenize = function(original) {","num":74},{"hash":"fe098a64f9a195536f23683068f0f13efce0a8d6","line":"    var raw = original.slice(),","num":75},{"hash":"24d04f2959579877f87a34d14d7766e30195dea4","line":"        match = null,","num":76},{"hash":"9e866f9ae218894f6b71b8c9d710ca61a3272bd5","line":"        map = {","num":77},{"hash":"c6e08e8f4de39159173cfe3a97676341e1576157","line":"            '%':tokens.TagToken,","num":78},{"hash":"7a065d147db7bac6f79fcd3caf1969dc75d2a1ae","line":"            '#':tokens.CommentToken,","num":79},{"hash":"d6b1513d0586f9fe6f5c8329d8a688bc60c45b9a","line":"            '{':tokens.FilterToken","num":80},{"hash":"fe464369d3a156668fdcb241be4ad0e90b710de8","line":"        },","num":81},{"hash":"0f4bc3e65ca565e6296ee4751ee6076409ed72b8","line":"        tokens_out = [],","num":82},{"hash":"a739cbe5d40b22bf4f8799b780122888e4455b08","line":"        lineNo = 1,","num":83},{"hash":"5424e50cb8df7943e3f1737ebff6356b032a55cf","line":"        incLineNo = function(str) {","num":84},{"hash":"106c4ba986be9ca5495612df9320c1047ecf5a47","line":"            var count = 0;","num":85},{"hash":"81038ad14a5106930a110497eebbf4ad16ac7a90","line":"            for(var i = 0, len = str.length; i < len; ++i) {","num":86},{"hash":"41e412b5cdcb942146db76128279bb43e4474ce7","line":"                if(str.charAt(i) == '\\n') {","num":87},{"hash":"487287dc3da09abcf29807c7df8001cbb3ad12f7","line":"                    ++count;","num":88},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                }","num":89},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":90},{"hash":"e0ca8b17c337969b61af1e7322ee31e99363505a","line":"            lineNo += count;","num":91},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"        };","num":92},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":93},{"hash":"314e74bb1e4e8b4b7d00d142be380c0802505935","line":"    do {","num":94},{"hash":"e9ed68dce6d0fc7ae61b16691fe70674e1a95431","line":"        MATCH_RE.lastIndex = 0;","num":95},{"hash":"4753eef81d4aa9c0f43f8cce11757c281996e08e","line":"        match = MATCH_RE.exec(raw);","num":96},{"hash":"c31ec7498fc97fe4501a638e5777dc5ff02826b5","line":"        if(match) {","num":97},{"hash":"991da4c1e1697d90a3b472aabd9b51e7b2080af8","line":"            incLineNo(raw.slice(0, match.index));","num":98},{"hash":"be1ab99b00010dfcd2c3d02a234c064323a1aa4c","line":"            if(match.index > 0) {","num":99},{"hash":"d07d9be74e5d7e51242b68e88acbd0c5af733782","line":"                tokens_out.push(new tokens.TextToken(raw.slice(0, match.index)));","num":100},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":101},{"hash":"9d943f63bcb5a4a5e68e056214cfd73ba99ef220","line":"            tokens_out.push(new map[match[0].charAt(1)](match[1].replace(/^\\s+/g,'').replace(/^\\s+$/g, ''), lineNo));","num":102},{"hash":"e6c55cc2aaf5ae8683f918ad5e607fb9121eecfe","line":"            raw = raw.slice(match.index+match[0].length);","num":103},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":104},{"hash":"9b2af96ac1d0fdb5158ea9febd986d4f68b67466","line":"    } while(match);","num":105},{"hash":"b4a1f20179bfc67ff6ca5902239b492258615958","line":"    if(raw) {","num":106},{"hash":"fa7ffcadf7d81409b6f00912e334bd01e73559b6","line":"        tokens_out.push(new tokens.TextToken(raw));","num":107},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":108},{"hash":"8abf52374b96627a4f5307c5867aba123e7b4114","line":"    return tokens_out;","num":109},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":110},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":111},{"hash":"6e8f96c89fd5e42dce3b5b0173010427dafb75ce","line":"exports.Context = Context;","num":112},{"hash":"c3ac732e91ed031f9ec99d994fd43edc5dd31d40","line":"exports.Template = Template;","num":113}]},{"idx":6,"commit":"4d2e3f700a28dfabda8d87bb4063b87468450d12","msg":"refactor how libraries are passed to the Template class","data":[{"hash":"7b61c98eda3e653a5ae983813cc2484f80cbed3d","line":"var tokens = require('./tokens'),","num":1},{"hash":"3d6f2e8f6db2d27fe8cc436a4f3de36a4729d068","line":"    parsers = require('./parsers'),","num":2},{"hash":"5e3eb152d8df7a16b6d2d355fa39fc0460688599","line":"    libraries = require('./libraries');","num":3},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":4},{"hash":"5015ced7f1e658cdff1d2f8c41a4862338760402","line":"var Context = function(dict) {","num":5},{"hash":"96c9831417b999458bba82cbb42959f5c535fb50","line":"    for(var name in dict) if(dict.hasOwnProperty(name)) {","num":6},{"hash":"b3b45fcb21cf76e2088b643c48fc0f2fc34e7a32","line":"        this[name] = dict[name];","num":7},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":8},{"hash":"2d2f89ecdf72aa2066214590fb40662e793fb47c","line":"    this._original = dict;","num":9},{"hash":"7cf20ef5b064be9000cd5ba7234ed26c41147194","line":"    this._copy = function() {","num":10},{"hash":"1d7bde156805acda9f58ebad360dc5da93b268df","line":"        return Context.copy(this);","num":11},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":12},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":13},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":14},{"hash":"5814b3c54980bba88fb55e181de130da4b76b36a","line":"Context.copy = function(ctxt) {","num":15},{"hash":"409cf1b75c4699d58ace87e30b72f89bdeec1b80","line":"    var toCopy = {};","num":16},{"hash":"229ed40fba386bd2f6ea35f0c76942ca104faf8c","line":"    for(var name in ctxt._original) if (ctxt._original.hasOwnProperty(name)) {","num":17},{"hash":"7b68f2fba3602921211d2d0efcd6b4b536e0dde2","line":"        toCopy[name] = ctxt._original[name];","num":18},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":19},{"hash":"26170af6c844154797bdf0808f7765f9e60051ee","line":"    for(var name in ctxt) if (ctxt.hasOwnProperty(name) && name !== '_original' && name !== '_copy') {","num":20},{"hash":"4ac6bffa0c322082619094e9eb82b893f074a12f","line":"        toCopy[name] = ctxt[name];","num":21},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":22},{"hash":"4d77ab492fb6629d6e735c9827900cb20689fd5f","line":"    return new Context(toCopy);","num":23},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":24},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":25},{"hash":"74b373e4c752ad43ff7e142abe74e14798cdd5df","line":"var Template = function(raw, libs, parser) {","num":26},{"hash":"7801c2093b14a0e7d1197d36722aaea2d4758d1b","line":"    if(typeof(raw) !== 'string' || !raw) {","num":27},{"hash":"5dd6de5f9255d09875b4e8c5e25ac93c26d7eb15","line":"        throw new TypeError(\"You must pass in a string to render the template.\");","num":28},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":29},{"hash":"ed826a4996ab42f59d873795b3fad5ded697d294","line":"    this.raw = raw;","num":30},{"hash":"976b25ee4a6b0ea2b4145566f79e2a9b6f430991","line":"    libs = libs || {};","num":31},{"hash":"d4813347734cb22682c25a51a0caff51e00225cf","line":"    this.tag_library = libs.tag_library || new libraries.DefaultTagLibrary();","num":32},{"hash":"605eac9ba41bc7e3ecc1942656a2dfb0b7bcd37e","line":"    this.filter_library = libs.filter_library || new libraries.DefaultFilterLibrary();","num":33},{"hash":"d41b2d2d5178b26971a54b2941df093b307fde05","line":"    this.plugin_library = libs.plugin_library || new libraries.DefaultPluginLibrary();","num":34},{"hash":"70e97c1a826a1c5cc9d5f9e435451242de29456c","line":"    this.parser = parser || parsers.Parser;","num":35},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":36},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":37},{"hash":"60004d2fd3a0e5bcae456f1455e422e22d87c113","line":"Template.prototype.render = function(context, callback) {","num":38},{"hash":"6af9e128810cd775bb8d41d9fb57c6b8e17edde9","line":"    if(typeof(context) !== 'object') {","num":39},{"hash":"6636d1cb7320c74d2b00af30d2b82ff391853a85","line":"        throw new TypeError(\"You must pass in an instance of Object or plate.Context\");","num":40},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":41},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":42},{"hash":"665429a8de9119c5b654f216495d169f69db3196","line":"    if(!(context instanceof Context)) {","num":43},{"hash":"81cc1fe612cad81a7a1b7f7beadd6598bf8dfc51","line":"        context = new Context(context);","num":44},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":45},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":46},{"hash":"0ddd55a69142e02f99788de51527da9a2dea5063","line":"    if(!this.tokens) {","num":47},{"hash":"38b1dfdfdb89d142edb1fefeddb54b67983467df","line":"        this.tokens = Template.tokenize(this.raw);","num":48},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":49},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":50},{"hash":"deefa39275a43f66da76ce9c21604766e0c8ab22","line":"    if(!this.nodelist) {","num":51},{"hash":"7260da21642dbb4c43f7fac3a7e50bcbf2bd5291","line":"        var parser = new this.parser(","num":52},{"hash":"0925015ec52d351cdae7f72380d409bb91ee1581","line":"            this.tokens,","num":53},{"hash":"6f9b2dc55db404d2888d8fbe502e5416741190af","line":"            this.tag_library,","num":54},{"hash":"9f6fb48de8f3b53343e76e6c455a773d8d596797","line":"            this.filter_library,","num":55},{"hash":"fe84ef070369caa41881f9a062f20291628f22ad","line":"            this.plugin_library,","num":56},{"hash":"0634618a7ecf909a0a2d33b9ab5f27367c5b4085","line":"            this);","num":57},{"hash":"315ddad7330a70e9d2a0af26234570c98db4d009","line":"        this.nodelist = parser.parse();","num":58},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":59},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":60},{"hash":"c5727732e97dd0d0d7dfceced41e17c7f5367f91","line":"    this.nodelist.render(context, callback);","num":61},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":62},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":63},{"hash":"961bdd7326dcb33e3cb98e2123e57678d3242826","line":"var TAG_RE = /\\{%(.*?)%\\}/g,","num":64},{"hash":"907accf01a1cb952de6b11eaedf091803327849b","line":"    FILTER_RE = /\\{\\{(.*?)\\}\\}/g,","num":65},{"hash":"3b6165075b45b22ad3ac67f220402c36f886f3d3","line":"    COMMENT_RE = /\\{#(.*?)#\\}/g;","num":66},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":67},{"hash":"80d848ba183f00cf5c1ff3f445783ecb069d10a4","line":"var MATCH_RE = /\\{[%#\\{](.*?)[\\}#%]\\}/g;","num":68},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":69},{"hash":"d03ab1a04c05f2bc43636dee5b038bfea4cb5a53","line":"Template.tokenize = function(original) {","num":70},{"hash":"fe098a64f9a195536f23683068f0f13efce0a8d6","line":"    var raw = original.slice(),","num":71},{"hash":"24d04f2959579877f87a34d14d7766e30195dea4","line":"        match = null,","num":72},{"hash":"9e866f9ae218894f6b71b8c9d710ca61a3272bd5","line":"        map = {","num":73},{"hash":"c6e08e8f4de39159173cfe3a97676341e1576157","line":"            '%':tokens.TagToken,","num":74},{"hash":"7a065d147db7bac6f79fcd3caf1969dc75d2a1ae","line":"            '#':tokens.CommentToken,","num":75},{"hash":"d6b1513d0586f9fe6f5c8329d8a688bc60c45b9a","line":"            '{':tokens.FilterToken","num":76},{"hash":"fe464369d3a156668fdcb241be4ad0e90b710de8","line":"        },","num":77},{"hash":"0f4bc3e65ca565e6296ee4751ee6076409ed72b8","line":"        tokens_out = [],","num":78},{"hash":"a739cbe5d40b22bf4f8799b780122888e4455b08","line":"        lineNo = 1,","num":79},{"hash":"5424e50cb8df7943e3f1737ebff6356b032a55cf","line":"        incLineNo = function(str) {","num":80},{"hash":"106c4ba986be9ca5495612df9320c1047ecf5a47","line":"            var count = 0;","num":81},{"hash":"81038ad14a5106930a110497eebbf4ad16ac7a90","line":"            for(var i = 0, len = str.length; i < len; ++i) {","num":82},{"hash":"41e412b5cdcb942146db76128279bb43e4474ce7","line":"                if(str.charAt(i) == '\\n') {","num":83},{"hash":"487287dc3da09abcf29807c7df8001cbb3ad12f7","line":"                    ++count;","num":84},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                }","num":85},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":86},{"hash":"e0ca8b17c337969b61af1e7322ee31e99363505a","line":"            lineNo += count;","num":87},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"        };","num":88},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":89},{"hash":"314e74bb1e4e8b4b7d00d142be380c0802505935","line":"    do {","num":90},{"hash":"e9ed68dce6d0fc7ae61b16691fe70674e1a95431","line":"        MATCH_RE.lastIndex = 0;","num":91},{"hash":"4753eef81d4aa9c0f43f8cce11757c281996e08e","line":"        match = MATCH_RE.exec(raw);","num":92},{"hash":"c31ec7498fc97fe4501a638e5777dc5ff02826b5","line":"        if(match) {","num":93},{"hash":"991da4c1e1697d90a3b472aabd9b51e7b2080af8","line":"            incLineNo(raw.slice(0, match.index));","num":94},{"hash":"be1ab99b00010dfcd2c3d02a234c064323a1aa4c","line":"            if(match.index > 0) {","num":95},{"hash":"d07d9be74e5d7e51242b68e88acbd0c5af733782","line":"                tokens_out.push(new tokens.TextToken(raw.slice(0, match.index)));","num":96},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":97},{"hash":"9d943f63bcb5a4a5e68e056214cfd73ba99ef220","line":"            tokens_out.push(new map[match[0].charAt(1)](match[1].replace(/^\\s+/g,'').replace(/^\\s+$/g, ''), lineNo));","num":98},{"hash":"e6c55cc2aaf5ae8683f918ad5e607fb9121eecfe","line":"            raw = raw.slice(match.index+match[0].length);","num":99},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":100},{"hash":"9b2af96ac1d0fdb5158ea9febd986d4f68b67466","line":"    } while(match);","num":101},{"hash":"b4a1f20179bfc67ff6ca5902239b492258615958","line":"    if(raw) {","num":102},{"hash":"fa7ffcadf7d81409b6f00912e334bd01e73559b6","line":"        tokens_out.push(new tokens.TextToken(raw));","num":103},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":104},{"hash":"8abf52374b96627a4f5307c5867aba123e7b4114","line":"    return tokens_out;","num":105},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":106},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":107},{"hash":"6e8f96c89fd5e42dce3b5b0173010427dafb75ce","line":"exports.Context = Context;","num":108},{"hash":"c3ac732e91ed031f9ec99d994fd43edc5dd31d40","line":"exports.Template = Template;","num":109}]},{"idx":7,"commit":"2d27883d6b5e5074017683b4ee7413d1eece3ce4","msg":"initial checkin of plate","data":[{"hash":"7b61c98eda3e653a5ae983813cc2484f80cbed3d","line":"var tokens = require('./tokens'),","num":1},{"hash":"3d6f2e8f6db2d27fe8cc436a4f3de36a4729d068","line":"    parsers = require('./parsers'),","num":2},{"hash":"5e3eb152d8df7a16b6d2d355fa39fc0460688599","line":"    libraries = require('./libraries');","num":3},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":4},{"hash":"5015ced7f1e658cdff1d2f8c41a4862338760402","line":"var Context = function(dict) {","num":5},{"hash":"96c9831417b999458bba82cbb42959f5c535fb50","line":"    for(var name in dict) if(dict.hasOwnProperty(name)) {","num":6},{"hash":"b3b45fcb21cf76e2088b643c48fc0f2fc34e7a32","line":"        this[name] = dict[name];","num":7},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":8},{"hash":"2d2f89ecdf72aa2066214590fb40662e793fb47c","line":"    this._original = dict;","num":9},{"hash":"7cf20ef5b064be9000cd5ba7234ed26c41147194","line":"    this._copy = function() {","num":10},{"hash":"1d7bde156805acda9f58ebad360dc5da93b268df","line":"        return Context.copy(this);","num":11},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"    };","num":12},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":13},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":14},{"hash":"5814b3c54980bba88fb55e181de130da4b76b36a","line":"Context.copy = function(ctxt) {","num":15},{"hash":"409cf1b75c4699d58ace87e30b72f89bdeec1b80","line":"    var toCopy = {};","num":16},{"hash":"229ed40fba386bd2f6ea35f0c76942ca104faf8c","line":"    for(var name in ctxt._original) if (ctxt._original.hasOwnProperty(name)) {","num":17},{"hash":"7b68f2fba3602921211d2d0efcd6b4b536e0dde2","line":"        toCopy[name] = ctxt._original[name];","num":18},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":19},{"hash":"26170af6c844154797bdf0808f7765f9e60051ee","line":"    for(var name in ctxt) if (ctxt.hasOwnProperty(name) && name !== '_original' && name !== '_copy') {","num":20},{"hash":"4ac6bffa0c322082619094e9eb82b893f074a12f","line":"        toCopy[name] = ctxt[name];","num":21},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":22},{"hash":"4d77ab492fb6629d6e735c9827900cb20689fd5f","line":"    return new Context(toCopy);","num":23},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":24},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":25},{"hash":"ab0c4966a810d2db9c9e3999278d328c1b44cbb3","line":"var Template = function(raw, tag_library, filter_library, parser) {","num":26},{"hash":"7801c2093b14a0e7d1197d36722aaea2d4758d1b","line":"    if(typeof(raw) !== 'string' || !raw) {","num":27},{"hash":"5dd6de5f9255d09875b4e8c5e25ac93c26d7eb15","line":"        throw new TypeError(\"You must pass in a string to render the template.\");","num":28},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":29},{"hash":"ed826a4996ab42f59d873795b3fad5ded697d294","line":"    this.raw = raw;","num":30},{"hash":"90b04511081a29ad22fa0020ed1b36ee99580783","line":"    this.tag_library = tag_library || new libraries.DefaultTagLibrary();","num":31},{"hash":"12439e26ba666c9263b29ab190ea3763c36e707a","line":"    this.filter_library = filter_library || new libraries.DefaultFilterLibrary();","num":32},{"hash":"70e97c1a826a1c5cc9d5f9e435451242de29456c","line":"    this.parser = parser || parsers.Parser;","num":33},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":34},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":35},{"hash":"60004d2fd3a0e5bcae456f1455e422e22d87c113","line":"Template.prototype.render = function(context, callback) {","num":36},{"hash":"6af9e128810cd775bb8d41d9fb57c6b8e17edde9","line":"    if(typeof(context) !== 'object') {","num":37},{"hash":"6636d1cb7320c74d2b00af30d2b82ff391853a85","line":"        throw new TypeError(\"You must pass in an instance of Object or plate.Context\");","num":38},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":39},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":40},{"hash":"665429a8de9119c5b654f216495d169f69db3196","line":"    if(!(context instanceof Context)) {","num":41},{"hash":"81cc1fe612cad81a7a1b7f7beadd6598bf8dfc51","line":"        context = new Context(context);","num":42},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":43},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":44},{"hash":"0ddd55a69142e02f99788de51527da9a2dea5063","line":"    if(!this.tokens) {","num":45},{"hash":"38b1dfdfdb89d142edb1fefeddb54b67983467df","line":"        this.tokens = Template.tokenize(this.raw);","num":46},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":47},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":48},{"hash":"deefa39275a43f66da76ce9c21604766e0c8ab22","line":"    if(!this.nodelist) {","num":49},{"hash":"6a0db05d337f232064010303da7fc9f9c54f99a8","line":"        var parser = new this.parser(this.tokens, this.tag_library, this.filter_library);","num":50},{"hash":"315ddad7330a70e9d2a0af26234570c98db4d009","line":"        this.nodelist = parser.parse();","num":51},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":52},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":53},{"hash":"c5727732e97dd0d0d7dfceced41e17c7f5367f91","line":"    this.nodelist.render(context, callback);","num":54},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":55},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":56},{"hash":"961bdd7326dcb33e3cb98e2123e57678d3242826","line":"var TAG_RE = /\\{%(.*?)%\\}/g,","num":57},{"hash":"907accf01a1cb952de6b11eaedf091803327849b","line":"    FILTER_RE = /\\{\\{(.*?)\\}\\}/g,","num":58},{"hash":"3b6165075b45b22ad3ac67f220402c36f886f3d3","line":"    COMMENT_RE = /\\{#(.*?)#\\}/g;","num":59},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":60},{"hash":"80d848ba183f00cf5c1ff3f445783ecb069d10a4","line":"var MATCH_RE = /\\{[%#\\{](.*?)[\\}#%]\\}/g;","num":61},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":62},{"hash":"d03ab1a04c05f2bc43636dee5b038bfea4cb5a53","line":"Template.tokenize = function(original) {","num":63},{"hash":"fe098a64f9a195536f23683068f0f13efce0a8d6","line":"    var raw = original.slice(),","num":64},{"hash":"24d04f2959579877f87a34d14d7766e30195dea4","line":"        match = null,","num":65},{"hash":"9e866f9ae218894f6b71b8c9d710ca61a3272bd5","line":"        map = {","num":66},{"hash":"c6e08e8f4de39159173cfe3a97676341e1576157","line":"            '%':tokens.TagToken,","num":67},{"hash":"7a065d147db7bac6f79fcd3caf1969dc75d2a1ae","line":"            '#':tokens.CommentToken,","num":68},{"hash":"d6b1513d0586f9fe6f5c8329d8a688bc60c45b9a","line":"            '{':tokens.FilterToken","num":69},{"hash":"fe464369d3a156668fdcb241be4ad0e90b710de8","line":"        },","num":70},{"hash":"0f4bc3e65ca565e6296ee4751ee6076409ed72b8","line":"        tokens_out = [],","num":71},{"hash":"a739cbe5d40b22bf4f8799b780122888e4455b08","line":"        lineNo = 1,","num":72},{"hash":"5424e50cb8df7943e3f1737ebff6356b032a55cf","line":"        incLineNo = function(str) {","num":73},{"hash":"106c4ba986be9ca5495612df9320c1047ecf5a47","line":"            var count = 0;","num":74},{"hash":"81038ad14a5106930a110497eebbf4ad16ac7a90","line":"            for(var i = 0, len = str.length; i < len; ++i) {","num":75},{"hash":"41e412b5cdcb942146db76128279bb43e4474ce7","line":"                if(str.charAt(i) == '\\n') {","num":76},{"hash":"487287dc3da09abcf29807c7df8001cbb3ad12f7","line":"                    ++count;","num":77},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"                }","num":78},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":79},{"hash":"e0ca8b17c337969b61af1e7322ee31e99363505a","line":"            lineNo += count;","num":80},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"        };","num":81},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":82},{"hash":"314e74bb1e4e8b4b7d00d142be380c0802505935","line":"    do {","num":83},{"hash":"e9ed68dce6d0fc7ae61b16691fe70674e1a95431","line":"        MATCH_RE.lastIndex = 0;","num":84},{"hash":"4753eef81d4aa9c0f43f8cce11757c281996e08e","line":"        match = MATCH_RE.exec(raw);","num":85},{"hash":"c31ec7498fc97fe4501a638e5777dc5ff02826b5","line":"        if(match) {","num":86},{"hash":"991da4c1e1697d90a3b472aabd9b51e7b2080af8","line":"            incLineNo(raw.slice(0, match.index));","num":87},{"hash":"be1ab99b00010dfcd2c3d02a234c064323a1aa4c","line":"            if(match.index > 0) {","num":88},{"hash":"d07d9be74e5d7e51242b68e88acbd0c5af733782","line":"                tokens_out.push(new tokens.TextToken(raw.slice(0, match.index)));","num":89},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"            }","num":90},{"hash":"9d943f63bcb5a4a5e68e056214cfd73ba99ef220","line":"            tokens_out.push(new map[match[0].charAt(1)](match[1].replace(/^\\s+/g,'').replace(/^\\s+$/g, ''), lineNo));","num":91},{"hash":"e6c55cc2aaf5ae8683f918ad5e607fb9121eecfe","line":"            raw = raw.slice(match.index+match[0].length);","num":92},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"        }","num":93},{"hash":"9b2af96ac1d0fdb5158ea9febd986d4f68b67466","line":"    } while(match);","num":94},{"hash":"b4a1f20179bfc67ff6ca5902239b492258615958","line":"    if(raw) {","num":95},{"hash":"fa7ffcadf7d81409b6f00912e334bd01e73559b6","line":"        tokens_out.push(new tokens.TextToken(raw));","num":96},{"hash":"c2b7df6201fdd3362399091f0a29550df3505b6a","line":"    }","num":97},{"hash":"8abf52374b96627a4f5307c5867aba123e7b4114","line":"    return tokens_out;","num":98},{"hash":"479fc7c06b96a0acf32bee5c77ee38370a6414c9","line":"};","num":99},{"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","line":"","num":100},{"hash":"6e8f96c89fd5e42dce3b5b0173010427dafb75ce","line":"exports.Context = Context;","num":101},{"hash":"c3ac732e91ed031f9ec99d994fd43edc5dd31d40","line":"exports.Template = Template;","num":102}]}]
    </script>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
    <script type="text/javascript">
        var require = {
              baseUrl:window.location.protocol+'//'+window.location.host+'/'
            , paths:{
                'd3':'https://raw.github.com/mbostock/d3/master/d3.v2.min'
              , 'local':window.location.protocol+'//'+window.location.host+'/media/js'
            }
        }
    </script>
    <script type="text/javascript" src="https://raw.github.com/jrburke/requirejs/master/require.js" data-main="local/main"></script>	
  </body>
</html>
